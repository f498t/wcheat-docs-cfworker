import{d as C,p as L,ah as _,C as r,c as p,o as g,j as n,G as o,X as V,w as i,a as h}from"./chunks/framework.BORTu7Ix.js";import{s as k}from"./chunks/request.DdspfzFX.js";import{E as c}from"./chunks/theme.ClnHnu56.js";const j=async u=>k({path:"/userlogin",method:"POST",data:u}),E={id:"userLayout",class:"w-full h-full relative"},F={class:"rounded-lg flex items-center justify-evenly w-full h-full md:h-screen bg-white"},N={class:"md:w-3/5 w-10/12 h-full flex items-center justify-evenly"},P=C({name:"Login",__name:"login",setup(u){const d=(e,t,a)=>{if(t.search(/^[a-zA-Z0-9-]{10,}$/))return a(new Error("请输入正确令牌"));a()},s=L(),l=_({uuid:""}),v=_({uuid:[{validator:d,trigger:"blur"}]}),w=async()=>{const e=await j(l);return e.code===0?(sessionStorage.setItem("uuid",e.data.uuid),c({type:"success",message:"登录成功："+e.data.username}),!0):(c({type:"error",message:"登录失败："+e.message}),!1)},m=()=>{var e;(e=s.value)==null||e.validate(async t=>{if(!t){c({type:"error",message:"请正确填写令牌",showClose:!0});return}await w()&&(window.location.href="/accounts")})};return(e,t)=>{const a=r("el-input"),f=r("el-form-item"),y=r("el-button"),b=r("el-form");return g(),p("div",E,[n("div",F,[n("div",N,[n("div",null,[o(b,{ref_key:"loginForm",ref:s,model:l,rules:v,"validate-on-rule-change":!1,onKeyup:V(m,["enter"])},{default:i(()=>[o(f,{prop:"uuid",class:"mb-6"},{default:i(()=>[o(a,{modelValue:l.uuid,"onUpdate:modelValue":t[0]||(t[0]=x=>l.uuid=x),size:"large",placeholder:"请输入令牌","suffix-icon":"user"},null,8,["modelValue"])]),_:1}),o(f,{class:"mb-6"},{default:i(()=>[o(y,{class:"shadow shadow-active h-11 w-full",type:"primary",size:"large",onClick:m},{default:i(()=>t[1]||(t[1]=[h("登 录")])),_:1})]),_:1})]),_:1},8,["model","rules"])])])])])}}}),S=JSON.parse('{"title":"Login","description":"","frontmatter":{"layout":"home"},"headers":[],"relativePath":"login.md","filePath":"login.md"}'),z={name:"login.md"},U=Object.assign(z,{setup(u){return(d,s)=>(g(),p("div",null,[s[0]||(s[0]=n("h1",{id:"login",tabindex:"-1"},[h("Login "),n("a",{class:"header-anchor",href:"#login","aria-label":'Permalink to "Login"'},"​")],-1)),o(P)]))}});export{S as __pageData,U as default};

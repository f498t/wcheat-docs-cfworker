import{d as b,p as C,ah as _,C as n,c as p,o as g,j as u,G as s,X as V,w as l,a as L}from"./chunks/framework.lKnd1iSd.js";import{s as j}from"./chunks/request.fSkk4VTd.js";import{E as c}from"./chunks/theme.BdKzsvvT.js";const k=async r=>j({path:"/userlogin",method:"POST",data:r}),E={id:"userLayout",class:"w-full h-full relative"},F={class:"rounded-lg flex items-center justify-evenly w-full h-full md:h-screen bg-white"},N={class:"md:w-3/5 w-10/12 h-full flex items-center justify-evenly"},z=b({name:"Login",__name:"login",setup(r){const d=(e,t,o)=>{if(t.search(/^[a-zA-Z0-9-]{10,}$/))return o(new Error("请输入正确令牌"));o()},i=C(),a=_({uuid:""}),h=_({uuid:[{validator:d,trigger:"blur"}]}),v=async()=>{const e=await k(a);return e.code===0?(sessionStorage.setItem("uuid",e.data.uuid),c({type:"success",message:"登录成功："+e.data.username}),!0):(c({type:"error",message:"登录失败："+e.message}),!1)},m=()=>{var e;(e=i.value)==null||e.validate(async t=>{if(!t){c({type:"error",message:"请正确填写令牌",showClose:!0});return}await v()&&(window.location.href="/accounts")})};return(e,t)=>{const o=n("el-input"),f=n("el-form-item"),w=n("el-button"),y=n("el-form");return g(),p("div",E,[u("div",F,[u("div",N,[u("div",null,[s(y,{ref_key:"loginForm",ref:i,model:a,rules:h,"validate-on-rule-change":!1,onKeyup:V(m,["enter"])},{default:l(()=>[s(f,{prop:"uuid",class:"mb-6"},{default:l(()=>[s(o,{modelValue:a.uuid,"onUpdate:modelValue":t[0]||(t[0]=x=>a.uuid=x),size:"large",placeholder:"请输入令牌","suffix-icon":"user"},null,8,["modelValue"])]),_:1}),s(f,{class:"mb-6"},{default:l(()=>[s(w,{class:"shadow shadow-active h-11 w-full",type:"primary",size:"large",onClick:m},{default:l(()=>t[1]||(t[1]=[L("登 录")])),_:1})]),_:1})]),_:1},8,["model","rules"])])])])])}}}),S=JSON.parse('{"title":"Login","description":"","frontmatter":{"layout":"home","title":"Login"},"headers":[],"relativePath":"login.md","filePath":"login.md"}'),B={name:"login.md"},U=Object.assign(B,{setup(r){return(d,i)=>(g(),p("div",null,[s(z)]))}});export{S as __pageData,U as default};

import{p as r,ah as re,C as c,c as U,o as b,j as k,G as l,w as t,e as je,F as I,b as F,a as n,X as $e,t as p,k as B,B as Q,x as Ne}from"./chunks/framework.BORTu7Ix.js";import{s as T}from"./chunks/request.DdspfzFX.js";import{E as D,a as de}from"./chunks/theme.ClnHnu56.js";const ie=v=>T({path:"/account/createAccount",method:"POST",data:v}),Pe=v=>T({path:"/account/deleteAccount",method:"DELETE",params:v}),Me=v=>T({path:"/account/deleteAccountByIds",method:"DELETE",params:v}),Ge=v=>T({path:"/account/updateAccount",method:"PUT",data:v}),ce=v=>T({path:"/account/findAccount",method:"GET",params:v}),Ke=v=>T({path:"/account/getAccountList",method:"GET",params:v}),Qe=v=>T({path:"/account/enableAccount",method:"PUT",data:v}),A=(v,O)=>{const x=O&&O.filter(S=>S.value===v);return x&&x[0]&&x[0].text},qe={style:{padding:"20px"}},Je={class:"gva-search-box"},Xe={class:"gva-table-box"},He={class:"gva-btn-list"},We={class:"gva-pagination"},Ye={class:"flex justify-between items-center"},Ze={class:"text-lg"},el={class:"flex justify-between items-center"},ll=Object.assign({name:"Accounts"},{__name:"accounts",setup(v){(()=>{const o=typeof window<"u"?sessionStorage.getItem("uuid"):null;o&&o.length>0||(D.error("请先登录"),window.location.href="/login")})();const x=r(!1),S=r([{text:"未登录",value:0},{text:"已登录",value:1},{text:"登陆中",value:2},{text:"已封号",value:3},{text:"试玩到期",value:4},{text:"无法联网",value:5},{text:"密码到期",value:6},{text:"验证码错误",value:7}]),L=r([{text:"不启用",value:0},{text:"暂停",value:1},{text:"DR",value:2},{text:"SQB",value:3},{text:"解锁转会市场",value:4}]),u=r({email:"",password:"",appcode:"",status:"",enable_status:"",access_token:"",coins:void 0,dr_level:void 0,stage_id:void 0,champions_points:void 0,transformarket_unlocked:void 0,record:""}),pe=re({}),ve=re({}),Y=r(),Z=r(),h=r(1),ee=r(0),j=r(10),E=r([]),f=r({}),fe=()=>{f.value={},g()},q=()=>{var o;(o=Z.value)==null||o.validate(async e=>{e&&(h.value=1,g())})},me=o=>{j.value=o,g()},_e=o=>{h.value=o,g()},g=async()=>{const o=await Ke({page:h.value,pageSize:j.value,...f.value});o.code===0&&(E.value=o.data.list,ee.value=o.data.total,h.value=o.data.page,j.value=o.data.pageSize)};g();const R=r([]),be=o=>{R.value=o},ge=o=>{de.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{ke(o)})},ye=async()=>{de.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{const o=[];if(R.value.length===0){D({type:"warning",message:"请选择要删除的数据"});return}R.value&&R.value.map(d=>{o.push(d.id)}),(await Me({ids:o})).code===0&&(D({type:"success",message:"删除成功"}),E.value.length===o.length&&h.value>1&&h.value--,g())})},$=r(""),we=async o=>{const e=await ce({id:o.id});$.value="update",e.code===0&&(u.value=e.data,z.value=!0)},ke=async o=>{(await Pe({id:o.id})).code===0&&(D({type:"success",message:"删除成功"}),E.value.length===1&&h.value>1&&h.value--,g())},z=r(!1),xe=()=>{$.value="create",z.value=!0},J=()=>{z.value=!1,u.value={email:"",password:"",appcode:"",status:void 0,enable_status:void 0,access_token:"",coins:void 0,dr_level:void 0,stage_id:void 0,champions_points:void 0,transformarket_unlocked:void 0,record:""}},he=async()=>{var o;(o=Y.value)==null||o.validate(async e=>{if(!e)return;let d;switch($.value){case"create":d=await ie(u.value);break;case"update":d=await Ge(u.value);break;default:d=await ie(u.value);break}d.code===0&&(D({type:"success",message:"创建/更改成功"}),J(),g())})},m=r({}),N=r(!1),Ve=()=>{N.value=!0},Ce=async o=>{const e=await ce({id:o.id});e.code===0&&(m.value=e.data,Ve())},De=()=>{N.value=!1,m.value={}};(async()=>{{const e=r(null);e.value=setInterval(()=>{g()},1e3*30),Ne(()=>{clearInterval(e.value),e.value=null})}})();const Re=o=>{const e=[];if(!o.record)return e;let d=o.record.split("; ");for(let i=0;i<d.length;i++){let s=d[i],_=s.indexOf("：");_>0?e.push({recordTime:s.slice(0,_),recordValue:s.slice(_+1)}):e.push({recordTime:"",recordValue:s})}return e},V=r({ids:[],status:""}),P=r(!1),le=async o=>{if(V.value.ids=[],o)V.value.ids.push(o.id);else{if(R.value.length===0){D({type:"warning",message:"请选择要启用的账号"});return}R.value&&R.value.map(e=>{V.value.ids.push(e.id)})}P.value=!0},X=()=>{P.value=!1,V.value.ids=[]},Se=async()=>{(await Qe(V.value)).code===0&&(D({type:"success",message:"启用成功"}),X(),g())},Ae=o=>{f.value.prop=o.prop,f.value.order=o.order,g()},Ue=o=>{Object.entries(o).map(([e,d])=>{f.value[e]=d}),q()},M=r([{text:"DR_10",value:10},{text:"DR_9",value:9},{text:"DR_8",value:8},{text:"DR_7",value:7},{text:"DR_6",value:6},{text:"DR_5",value:5},{text:"DR_4",value:4},{text:"DR_3",value:3},{text:"DR_2",value:2},{text:"DR_1",value:1},{text:"Elite",value:0}]),te=o=>o?"已解锁":"未解锁",H=r("/account/import"),Te=r(),Ee=o=>{const e=typeof window<"u"?sessionStorage.getItem("uuid"):null;return e&&e.length>0?(H.value="/account/import?uuid="+encodeURIComponent(e),!0):(H.value="/account/import",D.error("请先登录"),window.location.href="/login",!1)},Fe=async(o,e,d="text/plain")=>{const i=new Blob([o],{type:d}),s=URL.createObjectURL(i),_=document.createElement("a");_.href=s,_.download=e,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(s)},Be=async()=>{if(E.value.length===0){D.error("没有账号可以导出");return}let o="";E.value.forEach(e=>{o+=(e.email?e.email:"")+"----",o+=(e.password?e.password:"")+"----",o+=e.appcode?e.appcode:"",o+=(e.status?"----"+A(e.status,S.value):"")+`
`}),o.trimEnd(`
`),Fe(o,"accounts.txt","text/plain")};return(o,e)=>{const d=c("el-input"),i=c("el-form-item"),s=c("el-button"),_=c("el-form"),Le=c("el-upload"),w=c("el-table-column"),ae=c("el-table"),ze=c("el-card"),oe=c("InfoFilled"),ne=c("el-icon"),Ie=c("el-pagination"),G=c("el-option"),K=c("el-select"),ue=c("el-input-number"),W=c("el-drawer"),y=c("el-descriptions-item"),Oe=c("el-descriptions"),se=c("el-text");return b(),U("div",qe,[k("div",Je,[l(_,{ref_key:"elSearchFormRef",ref:Z,inline:!0,model:f.value,class:"demo-form-inline",rules:ve,onKeyup:$e(q,["enter"])},{default:t(()=>[l(i,{label:"邮箱",prop:"email"},{default:t(()=>[l(d,{modelValue:f.value.email,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value.email=a),placeholder:"搜索邮箱"},null,8,["modelValue"])]),_:1}),l(i,{label:"操作记录",prop:"record"},{default:t(()=>[l(d,{modelValue:f.value.record,"onUpdate:modelValue":e[1]||(e[1]=a=>f.value.record=a),placeholder:"搜索记录"},null,8,["modelValue"])]),_:1}),x.value?(b(),U(I,{key:0},[],64)):je("",!0),l(i,null,{default:t(()=>[l(s,{type:"primary",icon:"search",onClick:q},{default:t(()=>e[19]||(e[19]=[n("查询")])),_:1}),l(s,{icon:"refresh",onClick:fe},{default:t(()=>e[20]||(e[20]=[n("重置")])),_:1}),x.value?(b(),F(s,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:e[3]||(e[3]=a=>x.value=!1)},{default:t(()=>e[22]||(e[22]=[n("收起")])),_:1})):(b(),F(s,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:e[2]||(e[2]=a=>x.value=!0)},{default:t(()=>e[21]||(e[21]=[n("展开")])),_:1}))]),_:1})]),_:1},8,["model","rules"])]),k("div",Xe,[k("div",He,[l(s,{type:"primary",icon:"plus",onClick:xe},{default:t(()=>e[23]||(e[23]=[n("新增")])),_:1}),l(s,{icon:"delete",style:{"margin-left":"10px"},disabled:!R.value.length,onClick:ye},{default:t(()=>e[24]||(e[24]=[n("删除")])),_:1},8,["disabled"]),l(s,{type:"primary",icon:"SwitchButton",style:{"margin-left":"10px"},onClick:e[4]||(e[4]=a=>le(!1))},{default:t(()=>e[25]||(e[25]=[n("启用账号")])),_:1}),l(Le,{ref_key:"upload",ref:Te,action:H.value,"show-file-list":!1,"on-success":g,"before-upload":Ee,multiple:!1},{default:t(()=>[l(s,{type:"primary",icon:"upload",class:"ml-3"},{default:t(()=>e[26]||(e[26]=[n(" 导入账号 ")])),_:1})]),_:1},8,["action"]),l(s,{type:"primary",icon:"Download",style:{"margin-left":"10px"},onClick:Be},{default:t(()=>e[27]||(e[27]=[n("导出账号")])),_:1})]),l(ae,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:E.value,"row-key":"id",onSelectionChange:be,"max-height":"600","default-sort":{prop:null,order:null},onSortChange:Ae,border:"",onFilterChange:Ue},{default:t(()=>[l(w,{type:"selection",width:"45"}),l(w,{type:"expand",width:"45"},{default:t(a=>[l(ze,null,{default:t(()=>[l(ae,{data:Re(a.row),"max-height":"300"},{default:t(()=>[l(w,{label:"时间",prop:"recordTime",width:"200","show-overflow-tooltip":"true"}),l(w,{label:"记录",prop:"recordValue","min-width":"300","show-overflow-tooltip":"true"})]),_:2},1032,["data"])]),_:2},1024)]),_:1}),l(w,{align:"left",label:"邮箱",prop:"email",width:"180","show-overflow-tooltip":"true"}),l(w,{align:"left",label:"账号状态",prop:"status",width:"120",sortable:"custom","show-overflow-tooltip":"true","column-key":"status",filters:S.value,"filtered-value":f.value.status},{default:t(a=>[n(p(B(A)(a.row.status,S.value)),1)]),_:1},8,["filters","filtered-value"]),l(w,{align:"left",label:"启用状态",prop:"enable_status",width:"120",sortable:"custom","show-overflow-tooltip":"true","column-key":"enableStatus",filters:L.value,"filtered-value":f.value.enableStatus},{default:t(a=>[n(p(B(A)(a.row.enable_status,L.value)),1)]),_:1},8,["filters","filtered-value"]),l(w,{align:"left",label:"DR等级",prop:"dr_level",width:"120",sortable:"custom","show-overflow-tooltip":"true","column-key":"drLevel",filters:M.value,"filtered-value":f.value.drLevel},{default:t(a=>[n(p(B(A)(a.row.dr_level,M.value)),1)]),_:1},8,["filters","filtered-value"]),l(w,{align:"left",label:"转会市场",prop:"transformarket_unlocked",width:"110","column-key":"transformarketUnlocked",filters:[{text:"已解锁",value:!0},{text:"未解锁",value:!1}],"filtered-value":f.value.transformarket_unlocked},{default:t(a=>[n(p(te(a.row.transformarket_unlocked)),1)]),_:1},8,["filtered-value"]),l(w,{align:"left",label:"操作",fixed:"right","min-width":"240"},{default:t(a=>[l(s,{type:"primary",link:"",class:"table-button",onClick:C=>Ce(a.row)},{default:t(()=>[l(ne,{style:{"margin-right":"5px"}},{default:t(()=>[l(oe)]),_:1}),e[28]||(e[28]=n("查看"))]),_:2},1032,["onClick"]),l(s,{type:"primary",link:"",class:"table-button",onClick:C=>le(a.row)},{default:t(()=>[l(ne,{style:{"margin-right":"5px"}},{default:t(()=>[l(oe)]),_:1}),e[29]||(e[29]=n("启用"))]),_:2},1032,["onClick"]),l(s,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:C=>we(a.row)},{default:t(()=>e[30]||(e[30]=[n("编辑")])),_:2},1032,["onClick"]),l(s,{type:"Danger",link:"",icon:"delete",onClick:C=>ge(a.row)},{default:t(()=>e[31]||(e[31]=[n("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",We,[l(Ie,{layout:"total, sizes, prev, pager, next, jumper","current-page":h.value,"page-size":j.value,"page-sizes":[10,30,50,100,200,500,1e3],total:ee.value,onCurrentChange:_e,onSizeChange:me},null,8,["current-page","page-size","total"])])]),l(W,{"destroy-on-close":"",size:"800",modelValue:z.value,"onUpdate:modelValue":e[15]||(e[15]=a=>z.value=a),"show-close":!1,"before-close":J},{header:t(()=>[k("div",Ye,[k("span",Ze,p($.value==="create"?"新增":"编辑"),1),k("div",null,[l(s,{type:"primary",onClick:he},{default:t(()=>e[32]||(e[32]=[n("确 定")])),_:1}),l(s,{onClick:J},{default:t(()=>e[33]||(e[33]=[n("取 消")])),_:1})])])]),default:t(()=>[l(_,{model:u.value,"label-position":"top",ref_key:"elFormRef",ref:Y,rules:pe,"label-width":"80px"},{default:t(()=>[l(i,{label:"邮箱:",prop:"email"},{default:t(()=>[l(d,{modelValue:u.value.email,"onUpdate:modelValue":e[5]||(e[5]=a=>u.value.email=a),clearable:!0,placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(i,{label:"密码:",prop:"password"},{default:t(()=>[l(d,{modelValue:u.value.password,"onUpdate:modelValue":e[6]||(e[6]=a=>u.value.password=a),clearable:!0,placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),l(i,{label:"16位码:",prop:"appcode"},{default:t(()=>[l(d,{modelValue:u.value.appcode,"onUpdate:modelValue":e[7]||(e[7]=a=>u.value.appcode=a),clearable:!0,placeholder:"请输入16位码"},null,8,["modelValue"])]),_:1}),l(i,{label:"账号状态:",prop:"status"},{default:t(()=>[l(K,{modelValue:u.value.status,"onUpdate:modelValue":e[8]||(e[8]=a=>u.value.status=a),placeholder:"请选择状态",style:{width:"100%"},clearable:!0},{default:t(()=>[(b(!0),U(I,null,Q(S.value,(a,C)=>(b(),F(G,{key:C,label:a.text,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"启用状态:",prop:"enable_status"},{default:t(()=>[l(K,{modelValue:u.value.enable_status,"onUpdate:modelValue":e[9]||(e[9]=a=>u.value.enable_status=a),placeholder:"请选择状态",style:{width:"100%"},clearable:!0},{default:t(()=>[(b(!0),U(I,null,Q(L.value,(a,C)=>(b(),F(G,{key:C,label:a.text,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"access_token:",prop:"token"},{default:t(()=>[l(d,{modelValue:u.value.access_token,"onUpdate:modelValue":e[10]||(e[10]=a=>u.value.access_token=a),clearable:!0,placeholder:"请输入access_token"},null,8,["modelValue"])]),_:1}),l(i,{label:"金币：",prop:"coins"},{default:t(()=>[l(ue,{modelValue:u.value.coins,"onUpdate:modelValue":e[11]||(e[11]=a=>u.value.coins=a),modelModifiers:{number:!0},clearable:!0,style:{width:"200px"},placeholder:"请输入金币数量"},null,8,["modelValue"])]),_:1}),l(i,{label:"DR等级：",prop:"dr_level"},{default:t(()=>[l(K,{modelValue:u.value.dr_level,"onUpdate:modelValue":e[12]||(e[12]=a=>u.value.dr_level=a),placeholder:"请选择DR等级",style:{width:"100%"},clearable:!0},{default:t(()=>[(b(!0),U(I,null,Q(M.value,a=>(b(),F(G,{key:a.value,label:a.text,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"胜点：",prop:"champions_points"},{default:t(()=>[l(ue,{modelValue:u.value.champions_points,"onUpdate:modelValue":e[13]||(e[13]=a=>u.value.champions_points=a),modelModifiers:{number:!0},clearable:!0,style:{width:"200px"},placeholder:"请输入胜点"},null,8,["modelValue"])]),_:1}),l(i,{label:"操作记录:",prop:"record"},{default:t(()=>[l(d,{modelValue:u.value.record,"onUpdate:modelValue":e[14]||(e[14]=a=>u.value.record=a),clearable:!0,placeholder:"请输入操作记录"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"]),l(W,{"destroy-on-close":"",size:"800",modelValue:N.value,"onUpdate:modelValue":e[16]||(e[16]=a=>N.value=a),"show-close":!0,"before-close":De,title:"查看"},{default:t(()=>[l(Oe,{column:1,border:""},{default:t(()=>[l(y,{label:"邮箱"},{default:t(()=>[n(p(m.value.email),1)]),_:1}),l(y,{label:"密码"},{default:t(()=>[n(p(m.value.password),1)]),_:1}),l(y,{label:"16位码"},{default:t(()=>[n(p(m.value.appcode),1)]),_:1}),l(y,{label:"账号状态"},{default:t(()=>[n(p(B(A)(m.value.status,S.value)),1)]),_:1}),l(y,{label:"启用状态"},{default:t(()=>[n(p(B(A)(m.value.enable_status,L.value)),1)]),_:1}),l(y,{label:"access_token"},{default:t(()=>[n(p(m.value.access_token),1)]),_:1}),l(y,{label:"金币"},{default:t(()=>[n(p(m.value.coins),1)]),_:1}),l(y,{label:"DR等级"},{default:t(()=>[n(p(B(A)(m.value.dr_level,M.value)),1)]),_:1}),l(y,{label:"StageId"},{default:t(()=>[n(p(m.value.stage_id),1)]),_:1}),l(y,{label:"胜点"},{default:t(()=>[n(p(m.value.champions_points),1)]),_:1}),l(y,{label:"转会市场"},{default:t(()=>[n(p(te(m.value.transformarket_unlocked)),1)]),_:1}),l(y,{label:"操作记录"},{default:t(()=>[n(p(m.value.record),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(W,{size:"800",modelValue:P.value,"onUpdate:modelValue":e[18]||(e[18]=a=>P.value=a),"show-close":!0,"before-close":X,title:"启用账号","destory-on-close":""},{title:t(()=>[k("div",el,[e[36]||(e[36]=k("span",{class:"text-lg"},"启用账号",-1)),k("div",null,[l(s,{type:"primary",onClick:Se},{default:t(()=>e[34]||(e[34]=[n("确定")])),_:1}),l(s,{onClick:X},{default:t(()=>e[35]||(e[35]=[n("取消")])),_:1})])])]),default:t(()=>[l(_,{model:V.value,"label-position":"top","label-width":"80px"},{default:t(()=>[l(i,{label:"选中的账号"},{default:t(()=>[l(se,{class:"mx-1"},{default:t(()=>e[37]||(e[37]=[n("选中的账号数量：")])),_:1}),e[38]||(e[38]=n()),l(se,{class:"mx-1",type:"primary"},{default:t(()=>[n(p(V.value.ids.length),1)]),_:1})]),_:1}),l(i,{label:"启用状态:",prop:"enableStatus"},{default:t(()=>[l(K,{modelValue:V.value.status,"onUpdate:modelValue":e[17]||(e[17]=a=>V.value.status=a),placeholder:"请选择状态",style:{width:"100%"},clearable:!0},{default:t(()=>[(b(!0),U(I,null,Q(L.value,(a,C)=>(b(),F(G,{key:C,label:a.text,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),sl=JSON.parse('{"title":"Accounts","description":"","frontmatter":{"layout":"page","title":"Accounts"},"headers":[],"relativePath":"accounts.md","filePath":"accounts.md"}'),tl={name:"accounts.md"},rl=Object.assign(tl,{setup(v){return(O,x)=>(b(),U("div",null,[l(ll)]))}});export{sl as __pageData,rl as default};
